<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-08-15 Thu 16:56 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Register Machines and Imperative Form</title>
<meta name="author" content="noteness" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="../../themes/readtheorg/style/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../themes/readtheorg/style/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="../../themes/readtheorg/style/css/extra.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../themes/readtheorg/style/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="../../themes/readtheorg/style/js/readtheorg.js"></script>
<script src="../../themes/math/style/js/math.js?config=TeX-AMS_HTML"></script>
<link rel="stylesheet" type="text/css" href="../../themes/math/style/css/math.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<link rel="icon" type="image/png" href="../../themes/popl/style/img/favicon/popl.png" />
<div style="display: none"> \(
% Latex Preamble definitions here (mostly usepackage)
\usepackage%
%[dvipsnames]
{xcolor}
% make sure this is before the loading font packages
\newcommand\hmmax{0}
\newcommand\bmmax{0}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage
%[dvipsnames]
{graphicx}
\usepackage{float}
%\usepackage[numbers]{natbib}
\usepackage[document]{ragged2e}
%
% enumitem doesn't seem to work with beamer
%\usepackage[inline]{enumitem}
\usepackage{wrapfig}
\usepackage{stackrel}
% extensible arrows
\usepackage{extpfeil}
% \usepackage{trfrac}
\usepackage{amsthm}
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{tikz-qtree}
\usetikzlibrary{automata, positioning, arrows, shapes.geometric}
\usepackage{turnstile}
\usepackage{comment}
%https://tex.stackexchange.com/questions/21334/is-there-a-package-that-has-the-clockwise-gapped-circle-arrow-in-it
% \usepackage{mathbx}
\usepackage{datetime}
\usepackage{datetime2}

%% Also See
%% http://u.cs.biu.ac.il/~tsaban/Pdf/LaTeXCommonErrs.pdf
%% for general tips
\usepackage{listings}
\usepackage{subfigure}
\usepackage{bm}
\usepackage{amsfonts} %% - also included by amssymb
\usepackage{mathpazo} %% - because the OP uses mathpazo, optional
%\usepackage{tufte-latex}
\usepackage{comment}
\usepackage{mathtools}
\usepackage{bussproofs}
\usepackage{hyperref}
%\usepackage{cleveref}
\)</div>
<div style="display: none"> \(
%% Your math definitions here
% \newcommand{\alphaequiv}{{\underset{\raise 0.7em\alpha}{=}}}
\newcommand{\yields}{\Rightarrow}
\newcommand{\derives}{\overset{*}{\yields}}
\newcommand{\alphaequiv}{=_{\alpha}}
\newcommand{\tto}[2]{{\overset{#1}{\underset{#2}{\longrightarrow}}}}
\newcommand{\transitsto}[2]{{\overset{#1}{\underset{#2}{\longrightarrow}}}}
\newcommand{\xtransitsto}[2]{{\underset{#2}{\xrightarrow{#1}}}}
\newcommand{\xtransitsfrom}[2]{{\underset{#2}{\xleftarrow{#1}}}}
\newcommand{\xto}[2]{{\xtransitsto{#1}{#2}}}
\newcommand{\xfrom}[2]{{\xtransitsfrom{#1}{#2}}}
\newcommand{\xreaches}[2]{{\underset{#2}{\xtwoheadrightarrow{#1}}}}
\newcommand{\reaches}[2]{{\underset{#2}{\xtwoheadrightarrow{#1}}}}
%\newcommand{\reaches}[2]{{\overset{#1}{\underset{#2}{\twoheadrightarrow}}}}
%\newcommand{\goesto}[2]{\transitsto{#1}{#2}}
%\newcommand{\betareducesto}{{\underset{\beta}{\rightarrow}}}
\newcommand{\betareducesto}{\rightarrow_{\beta}}
%\newcommand{\etareducesto}{{\underset{\eta}{\rightarrow}}}
\newcommand{\etareducesto}{\rightarrow_{\eta}}
%\newcommand{\betaetareducesto}{{\underset{\beta\ \eta}{\rightarrow}}}
\newcommand{\betaetareducesto}{\rightarrow_{\beta\eta}}
\newcommand{\preducesto}{\rhd}
\newcommand{\psimplifiesto}{\stackrel{\scriptstyle{*}}{\rhd}}
\newcommand{\lreducesto}{\rightsquigarrow}
\newcommand{\lsimplifiesto}{\stackrel{\scriptstyle{*}}{\lreducesto}}
\newcommand{\rewritesto}{\hookrightarrow}
\newcommand{\goesto}[1]{\stackrel{#1}{\rightarrow}}
\newcommand{\xgoesto}[1]{\xrightarrow{#1}}
\newcommand{\reducesto}{\stackrel{}{\rightarrow}}
\newcommand{\simplifiesto}{\stackrel{\scriptstyle{*}}{\rightarrow}}
\newcommand{\connected}[1]{\stackrel{#1}{\leftrightarrow}}
\newcommand{\joins}{\downarrow}
\newcommand{\evaluatesto}{\Longrightarrow}
%\newcommand{\lit}[1]{\hbox{\sf{#1}}}
\newcommand{\lit}[1]{{\sf{#1}}}
\newcommand{\true}{\lit{true}}
\newcommand{\false}{\lit{false}}
\def\Z{\mbox{${\mathbb Z}$}}
\def\N{\mbox{${\mathbb N}$}}
\def\P{\mbox{${\mathbb P}$}}
\def\R{\mbox{${\mathbb R}$}}
\def\T{\mbox{${\mathbb T}$}}
\newcommand{\Rp}{{\mathbb{R}}^+}
\def\Bool{\mbox{${\mathbb B}$}}
\def\Q{\mbox{${\mathbb Q}$}}
\def\sA{\mbox{${\cal A}$}}
\def\sB{\mbox{${\cal B}$}}
\def\sC{\mbox{${\cal C}$}}
\def\sD{\mbox{${\cal D}$}}
\def\sF{\mbox{${\cal F}$}}
\def\sG{\mbox{${\cal G}$}}
\def\sL{\mbox{${\cal L}$}}
\def\sP{\mbox{${\cal P}$}}
\def\sM{\mbox{${\cal M}$}}
\def\sN{\mbox{${\cal N}$}}
\def\sR{\mbox{${\cal R}$}}
\def\sS{\mbox{${\cal S}$}}
\def\sO{\mbox{${\cal O}$}}
\def\sT{\mbox{${\cal T}$}}
\def\sU{\mbox{${\cal U}$}}
\def\th{\mbox{$\widetilde{h}$}}
\def\tg{\mbox{$\widetilde{g}$}}
\def\tP{\mbox{$\widetilde{P}$}}
\def\norm{\mbox{$\parallel$}}
\def\osum{${{\bigcirc}}\!\!\!\!{\rm s}~$}
\def\pf{\noindent {\bf Proof}~~}
\def\exec{\mathit{exec}}
\def\Act{\mathit{A\!ct}}
\def\Traces{\mathit{Traces}}
\def\Spec{\mathit{Spec}}
\def\uns{\mathit{unless}}
\def\ens{\mathit{ensures}}
\def\lto{\mathit{leads\!\!-\!\!to}}
\def\a{\alpha}
\def\b{\beta}
\def\c{\gamma}
\def\d{\delta}
\def\sP{\mbox{${\cal P}$}}
\def\sM{\mbox{${\cal M}$}}
\def\sA{\mbox{${\cal A}$}}
\def\sB{\mbox{${\cal B}$}}
\def\sC{\mbox{${\cal C}$}}
\def\sI{\mbox{${\cal I}$}}
\def\sS{\mbox{${\cal S}$}}
\def\sD{\mbox{${\cal D}$}}
\def\sF{\mbox{${\cal F}$}}
\def\sG{\mbox{${\cal G}$}}
\def\sR{\mbox{${\cal R}$}}
\def\tg{\mbox{$\widetilde{g}$}}
\def\ta{\mbox{$\widetilde{a}$}}
\def\tb{\mbox{$\widetilde{b}$}}
\def\tc{\mbox{$\widetilde{c}$}}
\def\tx{\mbox{$\widetilde{x}$}}
\def\ty{\mbox{$\widetilde{y}$}}
\def\tz{\mbox{$\widetilde{z}$}}
\def\tI{\mbox{$\widetilde{I}$}}
\def\norm{\mbox{$\parallel$}}
\def\sL{\mbox{${\cal L}$}}
\def\sM{\mbox{${\cal M}$}}
\def\sN{\mbox{${\cal N}$}}
\def\th{\mbox{$\widetilde{h}$}}
\def\tg{\mbox{$\widetilde{g}$}}
\def\tP{\mbox{$\widetilde{P}$}}
\def\norm{\mbox{$\parallel$}}
\def\to{\rightarrow}
\def\ov{\overline}
\def\gets{\leftarrow}
\def\too{\longrightarrow}
\def\To{\Rightarrow}
%\def\points{\mapsto}
%\def\yields{\mapsto^{*}}
\def\un{\underline}
\def\vep{$\varepsilon$}
\def\ep{$\epsilon$}
\def\tri{$\bigtriangleup$}
\def\Fi{$F^{\infty}$}
\def\Di{\Delta^{\infty}}
\def\ebox\Box
\def\emp{\emptyset}
\def\leadsto{\rightharpoondown^{*}}

\newcommand{\benum}{\begin{enumerate}}
\newcommand{\eenum}{\end{enumerate}}
\newcommand{\bdes}{\begin{description}}
\newcommand{\edes}{\end{description}}
\newcommand{\bt}{\begin{theorem}}
\newcommand{\et}{\end{theorem}}
\newcommand{\bl}{\begin{lemma}}
\newcommand{\el}{\end{lemma}}
% \newcommand{\bp}{\begin{prop}}
% \newcommand{\ep}{\end{prop}}
\newcommand{\bd}{\begin{defn}}
\newcommand{\ed}{\end{defn}}
\newcommand{\brem}{\begin{remark}}
\newcommand{\erem}{\end{remark}}
\newcommand{\bxr}{\begin{exercise}}
\newcommand{\exr}{\end{exercise}}
\newcommand{\bxm}{\begin{example}}
\newcommand{\exm}{\end{example}}
\newcommand{\beqa}{\begin{eqnarray*}}
\newcommand{\eeqa}{\end{eqnarray*}}
\newcommand{\bc}{\begin{center}}
\newcommand{\ec}{\end{center}}
\newcommand{\bcent}{\begin{center}}
\newcommand{\ecent}{\end{center}}
\newcommand{\la}{\langle}
\newcommand{\ra}{\rangle}
\newcommand{\bcor}{\begin{corollary}}
\newcommand{\ecor}{\end{corollary}}
\newcommand{\bds}{\begin{defns}}
\newcommand{\eds}{\end{defns}}
\newcommand{\brems}{\begin{remarks}}
\newcommand{\erems}{\end{remarks}}
\newcommand{\bxrs}{\begin{exercises}}
\newcommand{\exrs}{\end{exercises}}
\newcommand{\bxms}{\begin{examples}}
\newcommand{\exms}{\end{examples}}
\newcommand{\bfig}{\begin{figure}}
\newcommand{\efig}{\end{figure}}
\newcommand{\set}[1]{\{#1\}}
\newcommand{\pair}[1]{\langle #1\rangle}
\newcommand{\tuple}[1]{\langle #1\rangle}
\newcommand{\size}[1]{| #1 |}
\newcommand{\union}{\cup}
\newcommand{\Union}{\bigcup}
\newcommand{\intersection}{\cap}
\newcommand{\Intersection}{\bigcap}
\newcommand{\B}{\textbf{B}}
%\newcommand{\be}[2]{\begin{equation} \label{#1} \tag{#2} \end{equation}}
\newcommand{\abs}[1]{{\lvert}#1{\rvert}}
\newcommand{\id}[1]{\mathit{#1}}
\newcommand{\pfun}{\rightharpoonup}
%\newcommand{\ra}[1]{\kern-1.5ex\xrightarrow{\ \ #1\ \ }\phantom{}\kern-1.5ex}
%\newcommand{\ras}[1]{\kern-1.5ex\xrightarrow{\ \ \smash{#1}\ \ }\phantom{}\kern-1.5ex}
\newcommand{\da}[1]{\bigg\downarrow\raise.5ex\rlap{\scriptstyle#1}}
\newcommand{\ua}[1]{\bigg\uparrow\raise.5ex\rlap{\scriptstyle#1}}
% \newcommand{\lift}[1]{#1_{\bot}}
\newcommand{\signal}[1]{\tilde{#1}}
\newcommand{\ida}{\stackrel{{\sf def}}{=}}
\newcommand{\eqn}{\doteq}
\newcommand{\deduce}[1]{\sststile{#1}{}}

%% These don't sit very well with MathJax
%% so we don't plan to use theorem like environments
%% in org documents.
%% instead we plan to use headings with
%%  1. property drawers with a CLASS property identifying
%%  the environment
%%  2. A tag with the same name as the CLASS property
%%  In LaTeX export, these turn into (sub)sections.


%% See http://u.cs.biu.ac.il/~tsaban/Pdf/LaTeXCommonErrs.pdf
%% \newtheorem{prop}[thm]{Proposition}
%% \theoremstyle{plain}%default
%% \newtheorem{theorem}{Theorem}[section]
%% \newtheorem{lemma}{Lemma}[section]
%% \newtheorem{corollary}{Corollary}[section]
%% \newtheorem{definition}{Definition}[section]
%% \newtheorem{remark}{Remark}[section]
%% \newtheorem{example}{Example}[section]
%% \newtheorem{exercise}{Exercise}[section]



\newcommand{\less}[1]{#1_{<}}
\newcommand{\pfn}{\rightharpoonup}
\newcommand{\ffn}{\stackrel{{\sf fin}}{\rightharpoonup}}
\newcommand{\stkout}[1]{\ifmmode\text{\sout{\ensuremath{#1}}}\else\sout{#1}\fi}

% Caution: Not supported by MathJax!
% ----------------------------------
% \DeclareMathSymbol{\shortminus}{\mathbin}{AMSa}{"39}


% \usepackage{amsfonts} %% <- also included by amssymb
% \DeclareMathSymbol{\shortminus}{\mathbin}{AMSa}{"39}
\usepackage{mathpazo} %% <- because the OP uses mathpazo, optional



\newcommand{\mbf}[1]{\mathbf{#1}}

\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\rel}{\twoheadrightarrow}
\newcommand{\map}{\rightarrow}

%\newcommand{\fixed}{\boldsymbol{\circlearrowleft}}
\newcommand{\terminal}{\not\xto{}{}}
\newcommand{\fixed}{\bm\circlearrowleft}

\newcommand{\imp}{\rightarrow}
\newcommand{\dimp}{\leftrightarrow}  % double implication
\newcommand{\lequiv}{\Longleftrightarrow} % logical equivalence
\newcommand{\limplies}{\Rightarrow}
\newcommand{\lxor}{\veebar}
\)</div>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../index.html"> UP </a>
 |
 <a accesskey="H" href="../../index.html"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Register Machines and Imperative Form</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org109ed02">1. Introduction</a></li>
<li><a href="#orgf0d79eb">2. Boilerplate&#xa0;&#xa0;&#xa0;<span class="tag"><span class="boilerplate">boilerplate</span></span></a></li>
<li><a href="#org8fda4da">3. Example: Factorial</a>
<ul>
<li><a href="#orgc8a9bc4">3.1. Factorial test cases</a></li>
</ul>
</li>
<li><a href="#org556f937">4. Factorial: tail form</a></li>
<li><a href="#orgc719cd1">5. Imperative form</a></li>
<li><a href="#org20eaeda">6. Goto form</a></li>
<li><a href="#orgf8cae1d">7. An equivalent iterative C program</a></li>
<li><a href="#org917c2c4">8. Register machine form</a>
<ul>
<li><a href="#org9cb2df4">8.1. Interface and tests</a></li>
</ul>
</li>
<li><a href="#org2ebf2f2">9. Stepper form</a>
<ul>
<li><a href="#org51f88af">9.1. Program Counter</a></li>
<li><a href="#org44c999e">9.2. <code>show</code> displays computation state</a></li>
<li><a href="#orge94737f">9.3. <code>goto</code> updates the program counter</a></li>
<li><a href="#org9dfd680">9.4. <code>step</code> executes one code block</a></li>
<li><a href="#org344f1d8">9.5. Interface</a></li>
<li><a href="#org63e87c5">9.6. Tests</a></li>
</ul>
</li>
<li><a href="#orgfc4ad2b">10. Conclusion</a></li>
</ul>
</div>
</div>
<div id="outline-container-org109ed02" class="outline-2">
<h2 id="org109ed02"><span class="section-number-2">1.</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
The purpose of these notes is to understand an important set of
transformations that apply on programs that are already in tail form.
Recall that a program is in tail form if every function call in the
program is in tail position.  
</p>
</div>
</div>

<div id="outline-container-orgf0d79eb" class="outline-2">
<h2 id="orgf0d79eb"><span class="section-number-2">2.</span> Boilerplate&#xa0;&#xa0;&#xa0;<span class="tag"><span class="boilerplate">boilerplate</span></span></h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-racket" id="orgafd3fea">#lang racket
(provide (all-defined-out))
(require rackunit)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8fda4da" class="outline-2">
<h2 id="org8fda4da"><span class="section-number-2">3.</span> Example: Factorial</h2>
<div class="outline-text-2" id="text-3">
<p>
We define and study the transformations on the factorial function.
</p>
</div>
<div id="outline-container-orgc8a9bc4" class="outline-3">
<h3 id="orgc8a9bc4"><span class="section-number-3">3.1.</span> Factorial test cases</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-racket" id="orgb1f04b9">(check-equal? (! 0) 1 "!:1")
(check-equal? (! 3) 6 "!:2")
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org556f937" class="outline-2">
<h2 id="org556f937"><span class="section-number-2">4.</span> Factorial: tail form</h2>
<div class="outline-text-2" id="text-4">
<p>
We start with <code>!</code> the factorial function defined in tail
form. 
</p>
<div class="org-src-container">
<pre class="src src-scheme" id="org67aa304">(define (!/acc n)
  (letrec ([loop (lambda (i a)
                   (if (= 0 i)
                     a
                     (loop (sub1 i) (* a i))))])
    (loop n 1)))

(define ! !/acc)
</pre>
</div>

<p>
Notice that <code>!</code> is in tail form.  
</p>
</div>
</div>

<div id="outline-container-orgc719cd1" class="outline-2">
<h2 id="orgc719cd1"><span class="section-number-2">5.</span> Imperative form</h2>
<div class="outline-text-2" id="text-5">
<p>
It is worth examining how the identifiers <code>i</code> and <code>a</code> in the body of
<code>loop</code> are created and used.  Notice that each call to <code>loop</code> creates
a <i>new</i> pair of identifiers <code>i</code> and <code>a</code>.  The parameters <code>i</code> and <code>a</code>
are used in the inner call to <code>loop</code>.  They are, however, never used
<i>after</i> the call.  This is a consequence of the call to <code>loop</code> being
in tail position.
</p>

<p>
This observation creates an opportunity for the following important
transformation: It suffices to use exactly one pair of identifiers
across all the invocations of <code>loop</code>.  In other words, it is possible
to `lift' the formal parameters out of the body of loop and declare
them separately via a <code>let</code>.  <code>i</code> and <code>a</code> are now mutable variables,
i.e., they denote storage locations.  In addition <code>loop</code> is now a zero
argument function.  Parameter passing is now replaced by <i>variable
initialization</i>.  The resultant program is now said to be in
<i>imperative form</i>.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="orgbf4cbb1">(define (!/imp n)
    (let ([i n] [a 1])
      (letrec ([loop (lambda ()
                       (if (= 0 i)
                           a
                         (begin
                           (set! a (* a i))
                           (set! i (sub1 i))
                           (loop))))])
        (loop))))

(define ! !/imp)
</pre>
</div>
</div>
</div>

<div id="outline-container-org20eaeda" class="outline-2">
<h2 id="org20eaeda"><span class="section-number-2">6.</span> Goto form</h2>
<div class="outline-text-2" id="text-6">
<p>
Also, a zero-argument tail call is akin to a <code>goto</code>,
which merely transfers control to another point in the program.    
</p>
<div class="org-src-container">
<pre class="src src-racket" id="org4a57cc7">(define (goto f)
  (f))
</pre>
</div>

<p>
A further embellishment, <code>done</code>, emphasises the action of
returning from the function <code>loop</code>.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="orgb18f790">(define (done x)
  x)
</pre>
</div>

<p>
The register form of the factorial program is obtained by
suitably inserting <code>goto</code>'s and <code>done</code>'s.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="org65267e0">(define (!/goto n)
    (let ([i n] [a 1])
      (letrec ([loop (lambda ()
                       (if (= 0 i)
                           (done a) ; instead of a
                         (begin
                           (set! a (* a i))
                           (set! i (sub1 i))
                           (goto loop))))])  ; instead of (loop)
        (goto loop))))

(define ! !/goto)
</pre>
</div>

<p>
The program is now essentially a C program, with assignments,
and <code>goto's</code>!
</p>
</div>
</div>

<div id="outline-container-orgf8cae1d" class="outline-2">
<h2 id="orgf8cae1d"><span class="section-number-2">7.</span> An equivalent iterative C program</h2>
<div class="outline-text-2" id="text-7">
<p>
It is easy to transform the Scheme program, almost verbatim, into a C
program:
</p>

<div class="org-src-container">
<pre class="src src-c" id="org0e79fe2">#include&lt;stdio.h&gt;
 int f(int n) {

  int i = n;
  int a = 1;

 loop:

  if (i == 0)
    return a;

  a = a*i;
  i = i-1;
  goto loop;
}

int main() {
  printf("!(0) == %d\n", f(0));
  printf("!(1) == %d\n", f(1));
  printf("!(2) == %d\n", f(2));
  printf("!(3) == %d\n", f(3));
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org917c2c4" class="outline-2">
<h2 id="org917c2c4"><span class="section-number-2">8.</span> Register machine form</h2>
<div class="outline-text-2" id="text-8">
<p>
A further transformation converts the program to <i>register
machine form</i>.
</p>

<p>
Local variables now become global state variables, also
called register variables.  A special register variable
<code>*answer*</code> stores the final answer.
</p>
<div class="org-src-container">
<pre class="src src-racket" id="org00c250a">(define uninitialized '_)
(define *n* uninitialized) ; holds the input number
(define *i* uninitialized) ; state variable
(define *a* uninitialized) ; state variable
(define *answer* uninitialized) ; holds the final answer

</pre>
</div>

<p>
<code>done</code> now halts the program.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="orge8630d6">(define (done)
  (void))
</pre>
</div>

<p>
All functions now are essentially `basic' blocks of code:
They do not take any parameters, nor do they return
anything.  Execution within a basic block is a sequence of
assignment statements or if statements.  Control exits the
basic block only through a goto or by falling through. 
</p>

<div class="org-src-container">
<pre class="src src-racket" id="orgc8984e1">(define (init)
  (begin
    (set! *i* *n*)
    (set! *a* 1)
    (set! *answer* '_) ; uninitialized
    (goto loop)))

(define (loop)
   (if (= 0 *i*)
       (begin
         (set! *answer* *a*)  
         (goto done))
       (begin
         (set! *a* (* *a* *i*))
         (set! *i* (sub1 *i*))
         (goto loop))))
</pre>
</div>
</div>


<div id="outline-container-org9cb2df4" class="outline-3">
<h3 id="org9cb2df4"><span class="section-number-3">8.1.</span> Interface and tests</h3>
<div class="outline-text-3" id="text-8-1">
<p>
<code>!/reg</code> begins by initialising the register <code>*n*</code> and then
going to <code>init</code>.  All register variables, being top-level,
are available for inspection.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="org4b20b23">(define (!/reg n)   ; interface 
  (begin
    (set! *n* n)
    (goto init)))

(define ! !/reg)
;;; unit tests
(begin
  (!/reg 0)
  (check-equal? *answer* 1 "!/reg 0"))

(begin
  (!/reg 1)
  (check-equal? *answer* 1 "!/reg 1"))

(begin
  (!/reg 3)
  (check-equal? *answer* 6 "!/reg 6"))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2ebf2f2" class="outline-2">
<h2 id="org2ebf2f2"><span class="section-number-2">9.</span> Stepper form</h2>
<div class="outline-text-2" id="text-9">
<p>
For a program in register form, it is very easy to set up
things so that we can step through its execution.
</p>


<p>
The functions <code>show</code> and <code>step</code> are used as an interface to
carry out the stepping:
</p>

<dl class="org-dl">
<dt>show</dt><dd>A function of no argument that displays the state
of the computation.</dd>

<dt>step</dt><dd>A function of no argument that takes the
computation one `step' forward.</dd>
</dl>
</div>
<div id="outline-container-org51f88af" class="outline-3">
<h3 id="org51f88af"><span class="section-number-3">9.1.</span> Program Counter</h3>
<div class="outline-text-3" id="text-9-1">
<p>
The key observation is to introduce a new state variable
register variable called <b>pc</b>, the program counter.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="orgeb850ef">(define *pc* uninitialized)
</pre>
</div>

<p>
The program counter points to the current code <i>block</i>.
There are three code blocks in the above example: <code>init</code>,
<code>loop</code> and <code>done</code>.
</p>
</div>
</div>

<div id="outline-container-org44c999e" class="outline-3">
<h3 id="org44c999e"><span class="section-number-3">9.2.</span> <code>show</code> displays computation state</h3>
<div class="outline-text-3" id="text-9-2">
<p>
<code>show</code> displays all the registers at any given point of time
in the computation.
</p>
<div class="org-src-container">
<pre class="src src-racket" id="org0ef65ce">(define show
  (lambda ()
    (printf "*n*: ~a~n" *n*)
    (printf "*i*: ~a~n" *i*)
    (printf "*a*: ~a~n" *a*)
    (printf "*pc*: ~a~n" *pc*)
    (printf "*answer*: ~a~n~n" *answer*)
    (list *n* *i* *a* *pc* *answer*)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge94737f" class="outline-3">
<h3 id="orge94737f"><span class="section-number-3">9.3.</span> <code>goto</code> updates the program counter</h3>
<div class="outline-text-3" id="text-9-3">
<p>
The role of <code>goto</code> now is to merely update the program
counter and yield control back to the top level.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="org2e83bcd">(define (goto l)
  (set! *pc* l))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9dfd680" class="outline-3">
<h3 id="org9dfd680"><span class="section-number-3">9.4.</span> <code>step</code> executes one code block</h3>
<div class="outline-text-3" id="text-9-4">
<p>
<code>step</code> carries out a transition by executing the code
pointed to by <code>*pc*</code>.
</p>

<div class="org-src-container">
<pre class="src src-racket" id="org0070b19">(define (step)
  (*pc*))
</pre>
</div>

<p>
The definitions of the code blocks <code>init</code>, <code>loop</code> and <code>done</code>
are unchanged.
</p>
</div>
</div>


<div id="outline-container-org344f1d8" class="outline-3">
<h3 id="org344f1d8"><span class="section-number-3">9.5.</span> Interface</h3>
<div class="outline-text-3" id="text-9-5">
<p>
The interface 
</p>
<div class="org-src-container">
<pre class="src src-racket" id="orgf6ebb9a">(define (!/stepper n)   ; interface, same !/reg
  (begin
    (set! *n* n)
    (goto init)))

(define ! !/stepper)
</pre>
</div>
</div>
</div>

<div id="outline-container-org63e87c5" class="outline-3">
<h3 id="org63e87c5"><span class="section-number-3">9.6.</span> Tests</h3>
<div class="outline-text-3" id="text-9-6">
<div class="org-src-container">
<pre class="src src-racket" id="org9fa77ae">;;; unit tests

(test-case "(! 0)"
  (! 0)
  (check-equal? (show) 
                (list 0  ; *n*
                      '_  ; *i*
                      '_  ; *a*
                      init ; *pc*
                      '_ ; *answer*
                      ))
  (step)
  (check-equal? (show) 
                (list 0  ; *n*
                      0  ; *i*
                      1  ; *a*
                      loop ; *pc*
                      '_ ; answer
                      ))
  (step)
  (check-equal? (show)
                (list 0  ; *n*
                      0  ; *i*
                      1  ; *a*
                      done ; *pc*
                      1 ; answer
                      )))
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-orgfc4ad2b" class="outline-2">
<h2 id="orgfc4ad2b"><span class="section-number-2">10.</span> Conclusion</h2>
<div class="outline-text-2" id="text-10">
<p>
Accumulator style programs are in tail form.  We have seen
how a program in tail form may be systematically transformed
into an imperative form which closely resembles an iterative
C program.  The imperative form can further be transformed
into a register machine form where all program variables are
registers (i.e., global variables), all procedures are top
level and they neither take arguments nor return values.
The register form program may be transformed to a stepper
form that allows one to step through the execution of the
program, one basic block at a time.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: noteness</p>
<p class="date">Created: 2024-08-15 Thu 16:56</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
